<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/932d8f5a8a6bd073.css" as="style"/><link rel="stylesheet" href="/_next/static/css/932d8f5a8a6bd073.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-15f2b71a0311db2d.js" defer=""></script><script src="/_next/static/chunks/framework-305cb810cde7afac.js" defer=""></script><script src="/_next/static/chunks/main-1e819d43c82e61a4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a639b0fc98b302ac.js" defer=""></script><script src="/_next/static/chunks/c16184b3-1754bfa260bbde28.js" defer=""></script><script src="/_next/static/chunks/603-9686efb8fc297326.js" defer=""></script><script src="/_next/static/chunks/90-5b1c2dc4af198d41.js" defer=""></script><script src="/_next/static/chunks/pages/opt-366c4f0468bef1a4.js" defer=""></script><script src="/_next/static/CjmgEywVLlg2kev_hikEt/_buildManifest.js" defer=""></script><script src="/_next/static/CjmgEywVLlg2kev_hikEt/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div><header><a href="/blog">blog</a><a href="/misc">misc</a></header><div class="box helper-icons"><a href="/feed.xml" title="Blog RSS Feed"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" class="svg-inline--fa fa-rss " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 64C0 46.3 14.3 32 32 32c229.8 0 416 186.2 416 416c0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96C14.3 96 0 81.7 0 64zM0 416a64 64 0 1 1 128 0A64 64 0 1 1 0 416zM32 160c159.1 0 288 128.9 288 288c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224c-17.7 0-32-14.3-32-32s14.3-32 32-32z"></path></svg></a><a><svg style="position:relative;top:2px" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"></path></svg></a></div><main><div class="content"><nav class="toc"><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#algorithms-and-data-structures">Algorithms and Data Structures</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#cache-utilization">Cache utilization</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#concurrency">Concurrency</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#distributed-compute">Distributed compute</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#simd">SIMD</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#io">I/O</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#misc">Misc</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#tools">Tools</a></li></ol></nav>
<ol>
<li>Reducing the number of branches</li>
<li>State machines instead of booleans</li>
<li>Faster copy (struct copy will be done using an optimized inline memcpy)</li>
<li>Cheaper arithmetic<!-- -->
<ol>
<li>Avoid divisions by creating a table of 1/j and multiply by 1/j instead</li>
<li>Unsigned division is cheaper than signed division</li>
<li>Modulo often be transformed into if-statements</li>
</ol>
</li>
<li>Fewer operations</li>
<li>Calculations in loops</li>
<li>Avoid casting</li>
<li>Remove if statements in loops if they are only run for one particular iteration</li>
<li>Use a small number of function arguments to avoid using the stack</li>
<li>Inline functions</li>
<li>Parallelism</li>
<li>Using the <code>restrict</code> keyword</li>
<li>Double initialization</li>
<li>Useless initialization</li>
</ol>
<h1 id="algorithms-and-data-structures">Algorithms and Data Structures</h1>
<hr/>
<ul>
<li>Algorithms optimized for speed may consume more memory due to precomputed data structures or caching</li>
<li>Conversely, algorithms optimized for memory may have to compute values &quot;on the fly&quot; to avoid having them stored in a lookup table.</li>
<li>Not trivial as the best theoretical algorithm may be slower in practice due to how the program interacts with the memory!</li>
<li>EXAMPLE: Sorting</li>
</ul>
<h1 id="cache-utilization">Cache utilization</h1>
<hr/>
<ul>
<li>Code optimized for speed &quot;mus&quot; exploit the CPU cache more effectively to get faster execution times. However, this is not trivial and platform dependent.</li>
<li>Memory hierarchy</li>
<li>Cache access</li>
<li>Data cache vs Text cache</li>
<li>Cache models and levels</li>
<li>Spatial locality vs temporal locality<!-- -->
<ul>
<li>Instructions and data are normally not accessed in a random order. The order is based on loops, subroutines, data structures, arrays etc.</li>
<li>Stack vs Heap performance</li>
</ul>
</li>
<li>Virtual memory</li>
<li>Cost effective?</li>
</ul>
<h1 id="concurrency">Concurrency</h1>
<hr/>
<ul>
<li>Keep the critical section small</li>
<li>Spin-lock vs semaphore</li>
<li>Lock-free</li>
<li></li>
</ul>
<h1 id="distributed-compute">Distributed compute</h1>
<hr/>
<ul>
<li>Big data</li>
<li>MapReduce</li>
</ul>
<h1 id="simd">SIMD</h1>
<hr/>
<h1 id="io">I/O</h1>
<hr/>
<h1 id="misc">Misc</h1>
<hr/>
<ul>
<li>Loop unrolling</li>
<li>Pointer arithmetic</li>
<li>Compiler optimizations</li>
<li>Bitfields</li>
<li>Bitmaps</li>
<li>Register allocation</li>
<li>Floating point arithmetic</li>
<li>BigInt or 128 bits on 64 bit architecture</li>
<li>Inlining</li>
<li>Branchless programming (Pipelining)<!-- -->
<ul>
<li>Control hazards</li>
<li>Can lead to many stalls in the pipeline, normally the branch is predicted and stalled only if it turns out to be the wrong path. Much better if we can avoid the control statement altogether!</li>
</ul>
</li>
<li>Alignment</li>
<li>RISC vs CISC<!-- -->
<ul>
<li>CISC =&gt; Requires fewer instructions, but these instructions require a complex implementation which will make all instructions slow, even the simple instructions.</li>
<li>Compilers are often good at making fast code with simple instructions.</li>
<li>The longest delay in the circuit determines the clock speed.</li>
</ul>
</li>
<li>Handcoding assembly for performance?<!-- -->
<ul>
<li>Sometimes, but at the cost of efficiency and more lines of code increases the amounts of bugs</li>
</ul>
</li>
</ul>
<h1 id="tools">Tools</h1>
<hr/>
<ul>
<li>flamegraph</li>
</ul></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/opt","query":{},"buildId":"CjmgEywVLlg2kev_hikEt","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>