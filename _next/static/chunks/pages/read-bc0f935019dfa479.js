(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[818],{4141:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/read",function(){return a(4314)}])},4314:function(e,t,a){"use strict";a.r(t),a.d(t,{Reading:function(){return x},__N_SSG:function(){return m},default:function(){return k}});var r,s,n=a(5893),o=a(7090),l=a(2489),i=a(9417);(r=s||(s={}))[r.None=0]="None",r[r.AZ=1]="AZ",r[r.ZA=2]="ZA";let c=e=>e===s.None?s.AZ:e===s.AZ?s.ZA:(s.ZA,s.None);var u=a(7294),d=e=>{let{filter:t,setFilter:a,validPredicates:r,showStats:o,setShowStats:d}=e,[h,g]=(0,u.useState)([]),[p,y]=(0,u.useState)(""),j=(e,t)=>{a(a=>({...a,sort:{...a.sort,[e]:t}}))},m=(e,r)=>{if(!e)return;let s=t.predicate[e];s===r&&(r=""),a(t=>({...t,predicate:{...t.predicate,[e]:r}}))},x=e=>{switch(e){case s.AZ:return i.bDz;case s.ZA:return i.ifd;case s.None:return i.DhN}},k=e=>"icon".concat(e!==s.None?" active":""),f=e=>{let t="icon";return e===p&&(t+=h.length>0?" active":""),t},N=(e,a)=>{let r="icon";return a===t.predicate[e]&&(r+=" active"),r},S=(e,t)=>{if(p!==e){let a=Array.from(t);a.sort(),g(a.map(t=>[e,t])),y(e)}else g([]),y("")};return(0,n.jsxs)("div",{className:"book-header",children:[(0,n.jsxs)("div",{className:"book-header-main",children:[(0,n.jsxs)("span",{className:k(t.sort.year),onClick:()=>{let e=c(t.sort.year);j("year",e)},children:["year ",(0,n.jsx)(l.G,{icon:x(t.sort.year)})]}),(0,n.jsxs)("span",{className:k(t.sort.title),onClick:()=>{let e=c(t.sort.title);j("title",e)},children:["title ",(0,n.jsx)(l.G,{icon:x(t.sort.title)})]}),(0,n.jsxs)("span",{className:k(t.sort.author),onClick:()=>{let e=c(t.sort.author);j("author",e)},children:["author ",(0,n.jsx)(l.G,{icon:x(t.sort.author)})]}),"|",(0,n.jsxs)("span",{className:f("year"),onClick:()=>{S("year",r.year)},children:["year ",(0,n.jsx)(l.G,{icon:i.G_j})]}),(0,n.jsxs)("span",{className:f("tag"),onClick:()=>{S("tag",r.tags)},children:["tag ",(0,n.jsx)(l.G,{icon:i.G_j})]}),"|",(0,n.jsxs)("span",{className:"icon".concat(o?" active":""),onClick:()=>d(!o),children:["stats ",(0,n.jsx)(l.G,{icon:i.Wpq})]})]}),h?(0,n.jsx)("div",{className:"book-header-secondary",children:h.map(e=>{let[t,a]=e;return(0,n.jsx)("span",{className:N(t,a),onClick:()=>m(t,a),children:a},a)})}):(0,n.jsx)(n.Fragment,{})]})},h=JSON.parse('[{"author":"Yukio Mishima","country":"Japan","date":"2025-05-05","language":"English","pages":378,"tags":[],"title":"Runaway Horses","year":"1969","type":""},{"author":"Johann Wolfgang von Goethe","country":"Germany","date":"2024-10-10","language":"English","pages":168,"tags":[],"title":"Faust","year":"1808","type":""},{"author":"Yukio Mishima","country":"Japan","date":"2024-08-11","language":"English","pages":389,"tags":[],"title":"Spring Snow","year":"1967","type":""},{"author":"Fyodor Dostoevsky","country":"Russia","date":"2024-07-07","language":"English","pages":22,"tags":[],"title":"The dream of a Ridiculous Man","year":"1877","type":"Short Story"},{"author":"Nick Bostrom","country":"Sweden","date":"2024-06-23","language":"English","pages":536,"tags":[],"title":"Deep Utopia","year":"2024","type":""},{"author":"Frank Herbert","country":"United States","date":"2024-03-14","language":"English","pages":412,"tags":[],"title":"Dune","year":"1965","type":""},{"author":"George Orwell","country":"England","date":"2024-03-02","language":"English","pages":328,"tags":["Bokklubben World Library"],"title":"1984","year":"1949","type":""},{"author":"Viktor Frankl","country":"Austria","date":"2024-01-03","language":"German","pages":200,"tags":[],"title":"Man\'s search for meaning","year":"1946","type":""},{"title":"Meditations","author":"Marcus Aurelius","country":"","date":"2023-07-19","language":"English","pages":254,"tags":[],"year":"180","type":""},{"title":"Ultralearning","author":"Scott H Young","country":"USA","date":"2023-07-15","language":"English","pages":305,"tags":[],"year":"2019","type":""},{"author":"Marcel Proust","country":"France","date":"2023-06-26","language":"Swedish","pages":418,"tags":["Bokklubben World Library"],"title":"Swann\'s Way","year":"1913","type":""},{"author":"Richard Thaler","country":"USA","date":"2023-01-07","language":"English","pages":455,"tags":[],"title":"Misbehaving: The Making of Behavioral Economics","year":"2015","type":""},{"author":"Leo Tolstoy","country":"Russia","date":"2023-01-01","language":"Russian","pages":77,"tags":["Bokklubben World Library"],"title":"The Death of Ivan Ilyich","year":"1886","type":""}]'),g=a(1664),p=a.n(g);let y=e=>e.toLowerCase().replaceAll(":"," ").replaceAll(/\s+/g,"-"),j=e=>{let{book:t,summary:a,slug:r}=e,s=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:t.title}),(0,n.jsx)("div",{children:t.author}),(0,n.jsx)("div",{style:{fontSize:"10pt"},children:t.date}),""===t.type?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("span",{className:"preview-type tag",style:{fontSize:"10pt"},children:t.type})]}),o=(0,n.jsx)(p(),{href:"/".concat(r),className:"preview".concat(a?" summary":""),children:s}),l=(0,n.jsx)("div",{className:"preview".concat(a?" summary":""),children:s});return a?o:l};var m=!0;let x=e=>{let{files:t}=e,[a,r]=(0,u.useState)({}),[l,i]=(0,u.useState)(h),[c,g]=(0,u.useState)({sort:{title:s.None,author:s.None,year:s.None},predicate:{year:void 0,tag:void 0}}),[p,m]=(0,u.useState)({year:new Set,tags:new Set}),[x,k]=(0,u.useState)(!1),[f,N]=(0,u.useState)({total:{books:0,pages:0},predicates:{}});(0,u.useEffect)(()=>{let e={};for(let a of t){let t=y(a.title);e[t]=a.link}r(e);let a={year:new Set,tags:new Set},s={books:0,pages:0},n={total:structuredClone(s),predicates:{}},o=(e,t)=>{e in n.predicates||(n.predicates[e]=structuredClone(s)),n.predicates[e].books+=1,n.predicates[e].pages+=t.pages};for(let e of h){let t=e.date.slice(0,4);for(let r of(a.year.add(t),e.tags))a.tags.add(r),o(r,e);n.total.books+=1,n.total.pages+=e.pages,o(t,e)}m(a),N(n)},[]),(0,u.useEffect)(()=>{let e=h.filter(e=>{let t=!0;return c.predicate.year&&t&&(t=e.date.slice(0,4)===c.predicate.year),c.predicate.tag&&t&&(t=e.tags.includes(c.predicate.tag)),t}).sort((e,t)=>{let a=0;return c.sort.year!==s.None&&(a||(a=c.sort.year===s.AZ?e.date.localeCompare(t.date):t.date.localeCompare(e.date))),c.sort.title!==s.None&&(a||(a=c.sort.title===s.AZ?e.title.localeCompare(t.title):t.title.localeCompare(e.title))),c.sort.author!==s.None&&(a||(a=c.sort.author===s.AZ?e.author.localeCompare(t.author):t.author.localeCompare(e.author))),a});i(e)},[c]);let S=(0,n.jsx)("div",{className:"statistics",children:(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{}),(0,n.jsx)("th",{children:"Books"}),(0,n.jsx)("th",{children:"Pages"})]})}),(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"Total"}),(0,n.jsx)("td",{children:f.total.books}),(0,n.jsx)("td",{children:f.total.pages})]}),Object.entries(f.predicates).sort((e,t)=>{let[a]=e,[r]=t;return r.localeCompare(a)}).map(e=>{let[t,a]=e;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:t}),(0,n.jsx)("td",{children:a.books}),(0,n.jsx)("td",{children:a.pages})]},t)})]})]})}),v=(0,n.jsx)(n.Fragment,{children:l.map(e=>(0,n.jsx)(j,{book:e,summary:y(e.title) in a,slug:a[y(e.title)]},e.title))});return(0,n.jsxs)(o.Z,{active:"read",children:[(0,n.jsx)(d,{filter:c,setFilter:g,validPredicates:p,showStats:x,setShowStats:k}),x?S:v]})};var k=x}},function(e){e.O(0,[976,603,664,90,774,888,179],function(){return e(e.s=4141)}),_N_E=e.O()}]);